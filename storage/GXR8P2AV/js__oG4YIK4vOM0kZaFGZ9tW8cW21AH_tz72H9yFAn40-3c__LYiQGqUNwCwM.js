(function(a){Drupal.behaviors.highwire_panels_ajax_tab={attach:function(e,n){a('a.panels-ajax-tab-tab',e,n).once('hw-panels-ajax-tabs-once',function(){if(typeof(n.highwire_panel_tabs)!='undefined'){for(var e=n.highwire_panel_tabs.length-1;e>=0;e--){var t=n.highwire_panel_tabs[e].panel_name;if(a(this).data('panel-name')==t){a(this).unbind('click').attr('target','_blank')}}}});a('a.highwire-article-nav-jumplink',e,n).once('hw-panels-ajax-tabs-once',function(){if(typeof(n.highwire_panel_tabs)!='undefined'){var e=n.highwire_panel_tabs.panel_ajax_tab;if(a(this).data('panel-ajax-tab')==e){a(this).unbind('click').attr('target','_blank')}}})}}})(jQuery);(function(e){Drupal.behaviors.highwire_openurl={attach:function(r,n){if(e('.cit-ref-sprinkles-open-url').length>0){var i='';if('apath' in Drupal.settings.highwire){i='?apath='+encodeURIComponent(Drupal.settings.highwire.apath)};e.getJSON(Drupal.settings.basePath+'highwire/openurl_branding'+i,function(r){if(r){Drupal.settings.highwireOpenurl=r;if(r.base_url===null){e('.cit-ref-sprinkles-open-url').hide()}
else{e('.cit-ref-sprinkles-open-url').each(function(){var r=e(this);r.once('insertImage',function(){var i=Drupal.settings.highwireOpenurl,e=r.attr('href'),n='',t='';if(e.indexOf('{openurl}')!=-1){n='{openurl}';e=decodeURIComponent(e);try{e=decodeURIComponent(e)}catch(l){}}
else if(e.indexOf('urn:openurl:')!=-1){n='urn:openurl:';t='?'};e=e.replace('?query=','?');e=e.replace(n,Drupal.settings.basePath+'highwire/openurl'+t);var a=e+'&redirect_url='+i.base_url;r.attr('href',a.replace(/\+/g,' '));r.text(i.link_text);if(i.image){r.prepend('<img src="'+i.image+'"/>')}})})}}})}}}})(jQuery);(function(i){Drupal.behaviors.highwire_google_scholar={attach:function(t,e){if(i('.cit-extra').length>0){i('.cit-list .ref-cit').once('google_scholar_link',function(){i(this).each(function(){var n='',s=0;i(this).find('.cit-auth').each(function(){var e=i(this).find('.cit-name-given-names')!=='undefined'?i(this).find('.cit-name-given-names').html():'',t=i(this).find('.cit-name-surname')!=='undefined'?i(this).find('.cit-name-surname').html():'';if(e||t){n+='&author['+s+']='+(e?e:'')+(t?'+'+t:'')}
else if(i(this).hasClass('cit-collab')){n+='&author['+s+']='+i(this).text()};s++});var r=i(this).find('.cit-article-title').length>0?i(this).find('.cit-article-title').text():!1,h=i(this).find('.cit-pub-date').length>0?i(this).find('.cit-pub-date').html():!1,l='';if(r!==!1&&h!==!1&&n!==''){var a={gsAuthor:n,gsTitle:r.replace(/< *img[^>]*src *= *["']?([^"']*)"\/>/gi,'').replace(/\ /g,'+'),publicationYear:h};extraFields={journal:i(this).find('.cit-jnl-abbrev').length>0?i(this).find('.cit-jnl-abbrev').html():!1,volume:i(this).find('.cit-vol').length>0?i(this).find('.cit-vol').html():!1,issn:i(this).find('.cit-issn').length>0?i(this).find('.cit-issn').html():!1,isbn:i(this).find('.cit-isbn').length>0?i(this).find('.cit-isbn').html():!1,doi:i(this).find('.cit-doi').length>0?i(this).find('.cit-doi').html():!1,pages:(i(this).find('.cit-fpage').length>0&&i(this).find('.cit-lpage').length>0)?i(this).find('.cit-fpage').html()+'-'+i(this).find('.cit-lpage').html():!1};extraFieldString='';i.each(extraFields,function(t,i){if(i!==!1){extraFieldString+='&'+t+'='+i.replace(/\ /g,'+')}});l=n+'&title='+a.gsTitle+'&publication_year='+a.publicationYear+extraFieldString}
else{var e=i(this).find('cite').clone().remove().end().text();if(e.length){e=e.replace(/< *img[^>]*src *= *["']?([^"']*)"\/>/i,'');var o=e.split(' '),c=[];i.each(o,function(t,i){if(i!==''){c.push(encodeURIComponent(i))}});e=c.join('+');l='&q_txt='+e}};if(l){var f='<a href="/lookup/google-scholar?link_type=googlescholar&gs_type=article'+l+'" class="cit-ref-sprinkles cit-ref-sprinkles-google-scholar cit-ref-sprinkles-google-scholar"><span>Google Scholar</span></a>';i(this,t).once('custom-js',function(){i(this).find('.cit-extra').append(f)})}})})}}}})(jQuery);(function(t){Drupal.behaviors.highwireTablesMarkupProcessor={attach:function(e,a){t('a.table-expand-inline',e).once('highwireTablesMarkupProcessor',function(){t(this,e).each(function(){var l,o,n,a=this,i=!0;t(a,e).each(function(){var e;e=t(a).closest('.table');if(e.find('.table-caption').length==0){e.append('<div class=\'table-caption\'> &nbsp;</div>');Drupal.attachBehaviors(e[0])}});t(a).click(function(e){e.preventDefault();if(i){l=t(a).closest('.table').find('.table-caption');o=l.html();if(!n){t.get(t(this).data('table-url'),function(t){l.html(n=t)}).fail(function(){l.html(o+'<strong>Sorry, there was a problem fetching the table. Please try again later.</strong>')}).always(function(){Drupal.attachBehaviors(l[0]);t(a).closest('.table').toggleClass('table-expand-inline');t(a).html('Collapse inline');i=!1})};t(a).html('Collapse inline');t(a).closest('.table').find('table').wrap('<div class="table-wrapper"></div>');l.html(n);Drupal.attachBehaviors(l[0]);var s=t(a).closest('.table').find('.table-label').text();t(a).closest('.table').find('table').attr('alt',s)}
else{l.html(o);t(a).html('View inline')};t(a).closest('.table').toggleClass('table-expand-inline');i=!i})});t('a.table-expand-popup',e).each(function(){cbsettings=t.extend(a.colorbox,{title:!1});t(this).colorbox(cbsettings)})})}};t(document).bind('cbox_complete',function(){if(colorbox){Drupal.attachBehaviors(t(colorbox)[0])}})})(jQuery);